---
title: "Setup"
output:
  workflowr::wflow_html:
    toc: true
editor_options:
  chunk_output_type: console
---

# Pre-workshop setup

Please read the following setup information prior to the workshop beginning:

# Data files

TODO: make a script to just download everything relevant.


## Mouse brain (demo Stereo-seq v1.3 data)

We will be exploring a demo mouse brain dataset made public by STOmics:

![](assets/mmbrain.png "Stereo-seq mouse brain FF v1.3")

Although not required for this workshop, the raw data and additional demo 
datasets are available to download [here](https://en.stomics.tech/resources/demo-data/list.html).

You can download the processed [SAW report here](https://filesender.aarnet.edu.au/download.php?token=a66ee3d9-c207-4f1d-8ce1-6f7045a6a67b&files_ids=23488227).


```{r}
download.file(url = "https://filesender.aarnet.edu.au/download.php?token=a66ee3d9-c207-4f1d-8ce1-6f7045a6a67b&files_ids=23488227", 
              destfile = "data/C04042E3.report.tar.gz")
```

Raw data were processed using SAW v8.1 to produce [visualization.tar.gz](https://filesender.aarnet.edu.au/download.php?token=a66ee3d9-c207-4f1d-8ce1-6f7045a6a67b&files_ids=23488224).

As part of the workshop we will be exploring [visualization.tar.gz](https://filesender.aarnet.edu.au/download.php?token=a66ee3d9-c207-4f1d-8ce1-6f7045a6a67b&files_ids=23488224), but it is not essential
to download in advance unless you wish to explore it for yourself.


```{r}
download.file(url = "https://filesender.aarnet.edu.au/download.php?token=a66ee3d9-c207-4f1d-8ce1-6f7045a6a67b&files_ids=23488227", 
              destfile = "data/C04042E3.report.tar.gz")
```


## Mouse liver (published Stereo-seq v1.2 data)

For our later downstream analysis, we will be using the following 
anndata-compatible data file:  
[DY1_D0_stereo-seq.h5ad](https://filesender.aarnet.edu.au/download.php?token=1beae7a9-436e-4915-9e01-4f24360140aa&files_ids=23496582)

The above link is only temporarily available for this workshop, but the data will  
be available later on from [here]( https://ftp.cngb.org/pub/SciRAID/stomics/STDS0000059/Stereo-seq/DY1_D0_stereo-seq.h5ad).

These data are from [LISTA: LIver Spatio-Temporal Atlas](https://db.cngb.org/stomics/lista/).

This experiment used Stereo-seq to profile mouse liver homeostasis and 
regeneration following partial hepatectomy over several time points. Our file is
from day 0, the first time point following hepatectomy. 

Matched single cell data is also available to download from [here]()

TODO: figure out which file to point to for single cell.

# Envrionment setup


A Docker image is available containing RStudio and JupyterLab with dependencies 
already set up.

There are two main options to use this image:

## Run the docker image locally (recommended if you have Docker set up)

The easiest way to get started is to use the provided Docker image.

This image can be obtained like so: `docker pull quay.io/sagc/rstomics`

If your local device has docker installed, you can run a container locally.

A script might look like this:

Where BIND_DIR is a location that you would like to make available to the container.


## Running remotely (recommended if you don't have Docker set up)


We have set up multiple instances running remotely that you will be able to access.

You'll just need an internet-connected device to be able to access your instance.

## Setting up from scratch (not recommended)

If you want to set up an environment from scratch, please refer to the Dockerfile
for required dependencies.

Please note that due to the short amount of time allocated we will not be able to 
help diagnose setup issues if you choose this method.

Please note that StereoPy **requires** Python 3.8, it is not compatible with newer versions.

If you would like to set up your environment manually, please see below the
required dependencies.

## Moving on

Once you have your environment set up, you can move on to downloading the code
and data.

This website is implemented with `workflowr`. Clone it using git:

`git clone https://github.com/sagc-bioinformatics/abacbs2024_workshop.git`
